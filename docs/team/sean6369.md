# Sean Lee - Project Portfolio Page

## Overview
FlowCLI is a keyboard-first task and project manager built for speed. Create projects and track tasks with priorities, deadlines, and completion states, then slice the list instantly with filtering and sorting. Use concise inline commands when you know exactly what you want, or switch to interactive prompts for a guided flow. When you’re done, export a clean text report for sharing or record‑keeping.

### Summary of Contributions

#### Code contributed

[RepoSense link](https://nus-cs2113-ay2526s1.github.io/tp-dashboard/?search=sean6369&breakdown=true&sort=groupTitle%20dsc&sortWithin=title&since=2025-09-19T00:00:00&timeframe=commit&mergegroup=&groupSelect=groupByRepos&checkedFileTypes=docs~functional-code~test-code~other&filteredFileName=)

#### Enhancements implemented

- **Export infrastructure and view-state design**
  - **What it does**: Built the core export infrastructure including `TaskWithProject` wrapper class, `TaskCollector` utility for multi-project task aggregation, `TaskExporter` for file I/O, and a legacy prototype (`LegacyExportSupport`) that demonstrated view-state awareness for exporting the "current view".
  - **Justification**: Export functionality requires cross-project task aggregation and consistent formatting. The view-state prototype validated the UX concept of exporting the last displayed list, which informed the final export command design.
  - **Highlights**: 
    - Created `TaskWithProject` class to associate tasks with project names for cross-project operations (format: `"ProjectName: [X] Task Description"`)
    - Implemented `TaskCollector` with two collection strategies: `getAllTasksWithProjects()` and `getTasksFromProject()`
    - Designed `LegacyExportSupport` prototype supporting chained filter/sort options and view-state tracking (`LegacyViewState` with `ViewType` enum)
    - Prototype parsed complex command syntax: `export tasks to <filename>.txt [project] [filter by <type> <value>] [sort by <field> <order>]`
    - Core infrastructure (`TaskWithProject`, `TaskCollector`, `TaskExporter`) directly used by final `ExportCommandHandler`
    - View-state concept enabled "smart defaults" in export command (export last view if no parameters provided)
  - **Code**: `task/TaskWithProject.java`, `commands/utility/TaskCollector.java`, `commands/utility/TaskExporter.java`, `unused/LegacyExportSupport.java`

- **Filename validation and robust error messaging for export paths**
  - **What it does**: Implemented cross-platform filename validation that checks for illegal characters (`< > : " / \ | ? *`) across Windows and Unix systems, and created comprehensive I/O error handling with actionable, user-friendly messages.
  - **Justification**: Invalid filenames and opaque I/O errors are frequent user pitfalls. Early validation prevents partial export runs, while detailed error messages reduce support burden and improve user experience.
  - **Highlights**: 
    - Created `isValidFilename()` method in `ExportCommandHandler` that validates characters before file operations
    - Enforced `.txt` extension requirement with clear error messages
    - Implemented `TaskExporter` utility class with granular exception handling covering 10+ error scenarios (permission denied, directory not found, disk space, file locking, path length limits, read-only filesystem, security violations)
    - Error messages follow consistent pattern `"'<filename>': <description>"` with actionable suggestions
  - **Code**: `commands/core/ExportCommandHandler.java` (lines 366-386), `commands/utility/TaskExporter.java`

- **Command validation utilities**
  - **What it does**: Built a centralized validation framework with `CommandValidator` class containing multiple validation methods, `ValidationConstants` class with shared constants, and index parsing/validation methods in `CommandParser` and `ArgumentParser`, eliminating code duplication across command handlers.
  - **Justification**: Prior implementation had validation logic scattered across commands with inconsistent rules and error messages. Centralization ensures DRY principles, consistent validation behavior, and easier maintenance.
  - **Highlights**: 
    - Implemented validation methods: `validatePriority()`, `validateSortField()`, `validateSortOrder()`, `validateFilterType()`, `validateAndParseDate()`, `validateFilterCommand()`, `validateSortCommand()`
    - Added `parseIndexOrNull()` in `CommandParser` for task index parsing and validation (handles format errors, range checks, and converts to 0-based index)
    - Added `validateProjectIndex()` in `ArgumentParser` for project index validation (validates format, range, and handles missing index cases)
    - Added `priorityToInt()` helper for priority-to-integer conversion
    - Created `ValidationConstants` with 6 constant arrays/fields for priorities, filter types, sort fields, sort orders, and command keywords
    - Integrated across `FilterCommand`, `SortCommand`, `ExportCommand`, `UpdateCommand`, and interactive prompts
    - Date validation uses `LocalDate.parse()` with custom `InvalidDateException` for user-friendly error messages
  - **Code**: `commands/validation/CommandValidator.java` (157 lines), `commands/validation/ValidationConstants.java` (38 lines), `parsers/CommandParser.java` (`parseIndexOrNull` method), `parsers/ArgumentParser.java` (`validateProjectIndex` method)

- **Error handling and custom exceptions**
  - **What it does**: Designed and implemented 5 new exception classes (`InvalidCommandSyntaxException`, `InvalidDateException`, `InvalidFilenameException`, `InvalidIndexFormatException`, `ExtraArgumentException`) to create a more granular exception hierarchy. `InvalidCommandSyntaxException` specifically refactored command syntax errors that previously used generic `InvalidArgumentException`. The key difference: `InvalidCommandSyntaxException` handles malformed command structure (e.g., incomplete commands, missing keywords, wrong syntax format), while `InvalidArgumentException` handles invalid argument values (e.g., wrong priority value, invalid filter type).
  - **Justification**: Specific exception types provide clearer error boundaries, improve testability through targeted exception catching, and enable more precise error messages. In a CLI application, textual feedback quality directly impacts user experience.
  - **Highlights**: 
    - Created `InvalidCommandSyntaxException` to replace `InvalidArgumentException` for command syntax errors, improving error specificity for malformed commands
    - Added new exception classes (`InvalidDateException`, `InvalidFilenameException`, `InvalidIndexFormatException`, `ExtraArgumentException`) for domain-specific validation errors
    - `ExtraArgumentException` handles cases where commands receive unexpected extra parameters (e.g., `status 1 2` when `status` only accepts one argument)
    - Exception classes include context-aware constructors (e.g., `InvalidDateException` auto-generates format guidance)
    - Improved existing exception classes with clearer error messages: enhanced `IndexOutOfRangeException` with context-aware constructors that differentiate between task and project indices, and provide specific guidance based on context (e.g., "Task Index 5 is out of range. Please use a number between 1 and 3." vs "Project Index 2 is out of range. There are no projects available.")
    - `InvalidIndexFormatException` includes index type (task/project) for clearer context
    - Integrated exceptions across parsing layer (`CommandParser.parseIndexOrNull()`, `ArgumentParser.validateProjectIndex()`), validation layer (`CommandValidator`), and export flow
    - All exceptions extend `FlowCLIException` for consistent error handling
  - **Code**: `exceptions/InvalidCommandSyntaxException.java`, `exceptions/InvalidDateException.java`, `exceptions/InvalidFilenameException.java`, `exceptions/InvalidIndexFormatException.java`, `exceptions/ExtraArgumentException.java`, `exceptions/IndexOutOfRangeException.java`

#### Contributions to the User Guide (UG)

- **Export tasks section**: Authored comprehensive documentation covering export behavior with `--all` flag, project-specific exports, filter/sort combinations, and smart defaults (cached view export). Included detailed examples, file format specifications, path handling guidance, and interactive mode options.
- **Common mistakes and fixes**: Added troubleshooting blocks under `add-task`, `update-task`, `sort-tasks`, `filter-tasks`, and `export-tasks` commands. Each block provides specific error messages with actionable solutions (e.g., "Invalid filename" → "Avoid illegal characters and ensure the name ends with `.txt`", "Export failed: Permission denied" → "Export to a writable location").
- **Error handling guidance**: Documented export-related error scenarios including directory not found, permission denied, filesystem errors, and file locking issues, with clear remediation steps for each case.

#### Contributions to the Developer Guide (DG)

- **Validation Framework subsection**: Authored comprehensive documentation covering centralized input validation architecture. Documented `CommandValidator` methods, `ValidationConstants` structure, parser integration (`parseIndexOrNull`, `validateProjectIndex`), exception hierarchy, 3-layer validation flow, and best practices. Included usage examples, sequence diagram, and exception type reference.
- **Export Algorithm section**: Documented export infrastructure with architecture overview, key components (`ExportCommandHandler`, `TaskCollector`, `TaskExporter`, `TaskWithProject`), design principles, export workflow (5-step process), and integration details. Included class and sequence diagrams, code examples showing view state caching, and file format specifications.

#### Contributions to team-based tasks

- **Export UX design**: Designed the user experience flow for `export-tasks` command including interactive mode prompts, parameter collection sequence, confirmation dialogs, and success message formatting. Ensured seamless integration with existing sort/filter commands through view-state caching.
- **Error handling framework**: Established comprehensive error handling standards across the codebase. Defined exception hierarchy, error message conventions, and validation patterns that were adopted by team members. Supported bug triage by categorizing error types and providing clear remediation paths.
- **Validation framework adoption**: Created the centralized validation framework (`CommandValidator`, `ValidationConstants`) that became the standard for all command implementations, reducing code duplication and ensuring consistent validation behavior across the project.
- **Documentation standards**: Contributed to establishing documentation standards for the Developer Guide, particularly around validation framework and export algorithm sections, ensuring consistent formatting and completeness.

#### Review/mentoring contributions

- **Code review focus**: Actively reviewed PRs related to command parsing, validation logic, and error handling implementations. Provided feedback on exception usage, validation patterns, and error message consistency to maintain CLI output quality.
- **Architecture guidance**: Mentored team members on using the validation framework (`CommandValidator`, `parseIndexOrNull`, `validateProjectIndex`) and exception hierarchy, helping them adopt consistent patterns in their implementations.
- **UX consistency**: Reviewed and provided feedback on sorting/filtering command implementations to ensure seamless integration with export functionality, maintaining a coherent user experience across cross-project operations.
- **Error message standards**: Reviewed command implementations to ensure error messages followed established patterns (actionable, context-aware, user-friendly), contributing to overall CLI usability.

#### Contributions beyond the project team

- **PR and commit message standardization**: Established comprehensive PR description templates and commit message conventions across the team. Defined structure for PRs (description, changes, testing, related issues) and commit message format (type, scope, description) to improve review efficiency and project traceability.
- **Validation patterns**: The centralized validation framework and exception hierarchy design patterns could serve as reference implementations for other CLI projects requiring robust input validation.
- **Documentation practices**: The validation framework documentation structure and export algorithm documentation approach could be adopted by other teams for similar feature documentation.

---

## Contributions to the Developer Guide (Extracts)

The following are extracts from the `DeveloperGuide.md` that I contributed to.

### Validation Framework

The validation framework provides centralized input validation across all commands, ensuring consistent error handling and user feedback.

**Architecture Overview:**

The validation framework operates in 3 main layers:

1. **Project Index layer**: `ArgumentParser.validateProjectIndex()` validates project index format and range (throws `MissingArgumentException`, `IndexOutOfRangeException`, `InvalidIndexFormatException`) - *always executed first*
2. **Task Index layer**: `CommandParser.parseIndexOrNull()` validates task index format and range (throws `MissingIndexException`, `InvalidIndexFormatException`, `IndexOutOfRangeException`) - *only for commands that need task indices (Mark, Update, DeleteTask, Unmark)*
3. **Domain layer**: Commands use `CommandValidator` methods for domain-specific validation (priorities, dates, filters, sort options) which reference `ValidationConstants` for valid values

**Exception Types:**

- `InvalidIndexFormatException` - Index cannot be parsed as integer
- `InvalidDateException` - Date format is invalid (expects `yyyy-MM-dd`)
- `InvalidFilenameException` - Filename format is invalid
- `InvalidCommandSyntaxException` - Command syntax is malformed or incomplete
- `ExtraArgumentException` - Unexpected extra parameters provided to commands

**Validation Flow:**

The following sequence diagram illustrates the validation process, showing both success and exception paths:

![Validation Framework Sequence Diagram](../plantUML/validation-framework/validation-framework-sequence-diagram.png)

**Best Practices:**

- Always validate project index first using `ArgumentParser.validateProjectIndex()` before accessing project data
- Validate optional parameters (priority, deadline) before using them
- Use `validatePriority()` followed by `priorityToInt()` to normalize and convert priorities
- Throw specific exception types rather than generic ones for better error messages

### Export Algorithm

The export algorithm supports saving project and task data to text files with filtering and sorting capabilities.

**Architecture Overview:**

![Export Command Class Diagram](../plantUML/export-command/export-command-class-diagram.png)

**Key Components:**

- **ExportCommandHandler** - Orchestrates export process, parameter parsing, and view state management
- **TaskCollector** - Utility class for aggregating tasks from projects with project context
- **TaskExporter** - Utility class for file I/O operations with comprehensive error handling
- **TaskWithProject** - Wrapper class enabling cross-project operations

**Export Workflow:**

The following sequence diagram illustrates the export workflow:

![Export Command Sequence Diagram](../plantUML/export-command/export-command-sequence-diagram.png)

**TaskExporter:**

Utility class that writes tasks to text files with comprehensive error handling:

**Method:** `exportTasksToFile(List<TaskWithProject> tasks, String filename, String header) throws FileWriteException`

Uses try-with-resources for automatic cleanup. All I/O exceptions are translated to `FileWriteException` with user-friendly messages covering: permission denied, directory not found, disk space issues, file locking, path length limits, read-only filesystem, and security policy violations. Error messages follow the pattern `"'<filename>': <description>"` with actionable suggestions.

**Integration with ExportCommandHandler:**

The export workflow consists of 5 steps:

1. **Parameter Parsing** - Validates filename, project selection, filters, and sorting options
2. **Task Collection** - Uses `TaskCollector` based on parameters with 4 strategies (all tasks, specific project, cached view, or default)
3. **Filtering/Sorting** - Applies `TaskFilter` and `TaskSorter` if specified in export command
4. **File Export** - Calls `TaskExporter.exportTasksToFile()` with header
5. **User Feedback** - Displays success via `ConsoleUi.showExportSuccess()`

---

## Contributions to the User Guide (Extracts)

The following are extracts from the `UserGuide.md` that I contributed to.

### Export tasks Command

Saves tasks to a plain-text file with flexible export options.

**Export behavior:**
- **With `--all` flag**: Always exports all tasks from all projects
  ```
  export-tasks all-tasks.txt --all
  ```
- **With project index**: Exports only tasks from the specified project
  ```
  export-tasks party-plan.txt 1
  ```
- **With filter/sort in command**: Exports tasks matching the specified criteria
  ```
  export-tasks high-priority.txt filter-tasks --priority high sort-tasks --deadline ascending
  ```
- **Without parameters (smart defaults)**:
  - If you previously ran `sort-tasks` or `filter-tasks`, exports that cached view
  - If no cached view exists (or you used `list` command), exports all tasks
  - To force exporting all tasks, use the `--all` flag

**Common mistakes and fixes:**

- **"Export failed: Directory does not exist"**: Create the folder or use an existing path.
- **"Export failed: Permission denied"**: Export to a writable location (e.g., home directory).
- **"No tasks to export"**: Broaden scope by removing filters or exporting all tasks.
- **"Invalid filename"**: Filename must end with `.txt` and cannot contain invalid characters (`< > : " / \ | ? *`).

**Export file format example:**

When you export tasks, FlowCLI creates a plain text file like this:

```
Exported tasks (filter by priority high, sort by deadline ascending)
========================================

Project1: [X] Complete feature implementation (Due: 2025-11-15) [high]
Project1: [ ] Write documentation (Due: 2025-11-20) [high]
Project2: [ ] Review code (Due: 2025-11-18) [high]
```

### Common Mistakes and Fixes Sections

Added troubleshooting blocks throughout the User Guide to help users quickly resolve common errors:

**Export-related errors:**
- Export failed: Permission denied
- Export failed: Directory does not exist
- Export failed due to filesystem error (read-only, disk full, etc.)
- File is currently open or locked

**Validation errors:**
- Invalid date format (must be `YYYY-MM-DD`)
- Invalid priority value (must be `low`, `medium`, or `high`)
- Invalid index format
- Unexpected extra parameters

Each error includes specific causes and actionable solutions to help users resolve issues independently.
